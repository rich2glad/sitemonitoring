<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:p="http://primefaces.org/ui">
  <h:head>
  </h:head>
  <h:body>
  <p:growl id="messages"/>
  
  <p:dataTable value="#{checkListController.checks}" var="check" id="checkTable">
	<p:column headerText="name">
		#{check.name}
	</p:column>
	<p:column headerText="URL">
		<a href="#{check.url}" target="_blank">
			#{check.url}
		</a>
	</p:column>
	<p:column headerText="Operations">
		<h:form>
			<p:commandButton value="Edit" action="#{checkListController.setCheck(check)}" update=":checkForm"  resetValues="true" oncomplete="PF('checkDialog').show()" />
			<p:commandButton value="Remove" action="#{checkListController.remove(check)}" update=":checkTable, :messages" >
			<p:confirm header="Confirmation" message="Are you sure?" icon="ui-icon-alert" />
			</p:commandButton>
		</h:form>
	</p:column>
</p:dataTable>
<br/>
<h:form>
	<p:commandButton action="#{checkListController.clear()}" oncomplete="PF('checkDialog').show()" 
		value="add check" resetValues="true" update=":checkDialog" />
</h:form>

<p:dialog widgetVar="checkDialog" closeOnEscape="true" modal="true" header="check" id="checkDialog">



<h:form id="checkForm">
	<p:growl/>
	<p:focus/>
		<p:panelGrid columns="2">
		Name:
		<p:inputText value="#{checkListController.check.name}"/>
		
		Url:
		<p:inputText value="#{checkListController.check.url}"/>
	</p:panelGrid>
	<p:commandButton value="save" action="#{checkListController.save()}" update="checkForm,:checkTable" oncomplete="handleDialogSubmit(args, 'checkDialog')" />
</h:form>
</p:dialog>
<h:form>
<p:confirmDialog global="true" closeOnEscape="true">
        <p:commandButton value="Yes" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
        <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
</p:confirmDialog>
</h:form>
   </h:body>
   <script type="text/javascript">
    function handleDialogSubmit(args, dialogName) {
        if (!args.validationFailed) {
            PF(dialogName).hide();
        }
    }
</script>
</html>